{"version":3,"sources":["components/utils/consts.ts","components/Navbar.tsx","components/Login.tsx","components/Loader.tsx","components/routes.ts","components/Chat.tsx","components/AppRouter.tsx","App.tsx","index.tsx"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Navbar","auth","useContext","Context","useAuthState","user","AppBar","style","marginBottom","background","position","Toolbar","variant","Grid","container","justifyContent","Button","onClick","signOut","to","Login","login","a","provider","firebase","GoogleAuthProvider","signInWithPopup","Container","height","window","innerHeight","alignItems","borderRadius","width","paddingTop","direction","Typography","Box","p","signInAnonymously","Loader","className","publicRoutes","path","Component","privateRoutes","firestore","useState","value","setValue","useCollectionData","collection","orderBy","messages","loading","sendMessage","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","align","justify","marginTop","border","overflowY","map","message","margin","marginLeft","padding","Avatar","src","TextField","onKeyPress","event","charCode","fullWidth","rowsMax","onChange","e","target","color","AppRouter","component","exact","App","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.199a6342.chunk.js","sourcesContent":["export const LOGIN_ROUTE = '/login'\r\nexport const CHAT_ROUTE = '/chat'","import React, {useContext} from 'react';\r\nimport {AppBar, Button, Grid, Toolbar} from \"@material-ui/core\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport {LOGIN_ROUTE} from \"./utils/consts\";\r\nimport {Context} from \"../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\n\r\nconst Navbar = () => {\r\n    const {auth} = useContext<any>(Context)\r\n    const [user] = useAuthState(auth)\r\n\r\n    return (\r\n        <AppBar style={{marginBottom: 10, background: \"rgba(225,237,255,0.93)\"}}  position=\"static\">\r\n            <Toolbar variant={\"dense\"}>\r\n                <Grid container justifyContent={\"flex-end\"}>\r\n                    { user ?\r\n                        <Button onClick={() => auth.signOut()} variant={\"outlined\"}>Выйти</Button>\r\n                        :\r\n                        <NavLink to={LOGIN_ROUTE}>\r\n                            <Button variant={\"outlined\"}>Логин</Button>\r\n                        </NavLink>\r\n                    }\r\n                </Grid>\r\n            </Toolbar>\r\n        </AppBar>\r\n    );\r\n};\r\n\r\nexport default Navbar;","import React, {useContext} from 'react';\r\nimport {Box, Button, Container, Grid, Typography} from \"@material-ui/core\";\r\nimport {Context} from \"../index\";\r\nimport firebase from \"firebase/compat\";\r\n\r\n\r\nconst Login = () => {\r\n\r\n    const {auth} = useContext<any>(Context)\r\n\r\n    const login = async () => {\r\n        const provider = new firebase.auth.GoogleAuthProvider()\r\n        const {user} =  await auth.signInWithPopup(provider)\r\n    }\r\n\r\n    const loginAn = () => {\r\n        const {user} =   auth.signInAnonymously()\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Grid container\r\n                  style={{height: window.innerHeight - 50}}\r\n                  alignItems={\"center\"}\r\n                  justifyContent={\"center\"}\r\n            >\r\n                <Grid style={{borderRadius: 15, width: 400, paddingTop: 20,background: \"rgba(225,237,255,0.93)\"}}\r\n                      container\r\n                      alignItems={\"center\"}\r\n                      direction={\"column\"}\r\n                >\r\n                    <Typography variant=\"h5\">\r\n                        Приветствую тебя, самурай!\r\n                    </Typography>\r\n                    <Box p={2}>\r\n                        <Button onClick={login} variant={\"outlined\"}>\r\n                            Войти с помощью Google\r\n                        </Button>\r\n\r\n                    </Box>\r\n                    <Box style={{marginBottom: 20}}>\r\n                        <Button onClick={loginAn} variant={\"outlined\"}>\r\n                            Войти анонимно\r\n                        </Button>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Login;","import React from 'react';\r\nimport {Box, Container, Grid, Typography} from \"@material-ui/core\";\r\nimport '../App.css'\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <Container>\r\n            <Grid container\r\n                  style={{height: window.innerHeight - 50}}\r\n                  alignItems={\"center\"}\r\n                  justifyContent={\"center\"}\r\n            >\r\n                <Grid\r\n                    container\r\n                    alignItems={\"center\"}\r\n                    direction={\"column\"}\r\n                >\r\n                    <Box>\r\n                        <div className=\"lds-hourglass\"></div>\r\n                        <Typography variant={'h5'}>loading...</Typography>\r\n                    </Box>\r\n\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    )\r\n};\r\n\r\nexport default Loader;","import {CHAT_ROUTE, LOGIN_ROUTE} from \"./utils/consts\";\r\nimport Login from \"./Login\";\r\nimport Chat from \"./Chat\";\r\n\r\nexport const publicRoutes = [\r\n    {\r\n        path: LOGIN_ROUTE,\r\n        Component: Login\r\n    }\r\n]\r\n\r\nexport const privateRoutes = [\r\n    {\r\n        path: CHAT_ROUTE,\r\n        Component: Chat\r\n    }\r\n]","import React, {useContext, useState} from 'react';\r\nimport {Context} from \"../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport {Avatar, Button, Container, Grid, TextField, Typography} from '@material-ui/core';\r\nimport {useCollectionData} from \"react-firebase-hooks/firestore\";\r\nimport Loader from \"./Loader\";\r\nimport firebase from \"firebase/compat\";\r\n\r\nconst Chat = () => {\r\n    const {auth, firestore} = useContext<any>(Context)\r\n    const [user] = useAuthState(auth)\r\n    const [value, setValue] = useState('')\r\n    const [messages, loading] = useCollectionData<any>(\r\n        firestore().collection('messages').orderBy('createdAt')\r\n    )\r\n\r\n    const sendMessage = async () => {\r\n        if (value) {\r\n        firestore().collection('messages').add({\r\n            uid: user.uid,\r\n            displayName: user.displayName,\r\n            photoURL: user.photoURL,\r\n            text: value,\r\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\r\n        })}\r\n        setValue('')\r\n    }\r\n\r\n    const onKeyPressHandler = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n        if (event.charCode === 13) {\r\n            sendMessage();\r\n        }\r\n    }\r\n\r\n    if (loading) {\r\n        return <Loader />\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Typography variant=\"h5\" align={'center'}>\r\n                Чат самураев:\r\n            </Typography>\r\n            <Grid container\r\n                  justify={\"center\"}\r\n                  style={{height: window.innerHeight - 150, marginTop: 20}}>\r\n\r\n                <div style={{width: '80%', height: '70vh', border: '1px solid grey', borderRadius: '10px', overflowY: 'auto'}}>\r\n                    {messages && messages.map(message =>\r\n                        <div style={{\r\n                            margin: 10,\r\n                            border: user.uid === message.uid ? '2px solid #B8FFBE' : '2px solid rgba(225,237,255,0.93)',\r\n                            marginLeft: user.uid === message.uid ? 'auto' : '10px',\r\n                            width: 'fit-content',\r\n                            padding: 5,\r\n                            borderRadius: 10\r\n                        }}>\r\n                            <Grid container alignItems={\"center\"} style={{marginBottom: 5}}>\r\n                                <Avatar src={message.photoURL}/>\r\n                                <div style={{marginLeft: 5, borderRadius: 10}}>{message.displayName ? message.displayName : \"Анонимный чувак\"}</div>\r\n                            </Grid>\r\n                            <div>{message.text}</div>\r\n                        </div>\r\n                    )}\r\n\r\n\r\n                </div>\r\n                <Grid\r\n                    container\r\n                    direction={\"column\"}\r\n                    alignItems={\"flex-end\"}\r\n                    style={{width: '80%'}}\r\n                >\r\n                    <TextField\r\n                        onKeyPress={onKeyPressHandler}\r\n                        fullWidth\r\n                        rowsMax={2}\r\n                        variant={'outlined'}\r\n                        value={value}\r\n                        onChange={e => setValue(e.target.value)}\r\n                        style={{borderRadius: '20px', marginBottom: 5}}\r\n                    />\r\n                    <Button onClick={sendMessage} color={'secondary'} variant={\"outlined\"}>Отправить</Button>\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n\r\n    );\r\n};\r\n\r\nexport default Chat;","import React, {useContext} from 'react';\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\nimport {privateRoutes, publicRoutes} from \"./routes\";\r\nimport {CHAT_ROUTE, LOGIN_ROUTE} from \"./utils/consts\";\r\nimport {Context} from \"../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\n\r\nconst AppRouter = () => {\r\n    const {auth} = useContext<any>(Context)\r\n    const [user] = useAuthState(auth)\r\n    return user ?\r\n        (\r\n            <Switch>\r\n                {privateRoutes.map(({path, Component}) =>\r\n                <Route key={path} path={path} component={Component} exact={true}/>\r\n                )}\r\n                <Redirect to={CHAT_ROUTE} />\r\n            </Switch>\r\n        )\r\n        :\r\n        (\r\n            <Switch>\r\n                {publicRoutes.map(({path, Component}) =>\r\n                    <Route key={path} path={path} component={Component} exact={true}/>\r\n                )}\r\n                <Redirect to={LOGIN_ROUTE} />\r\n            </Switch>\r\n        )\r\n};\r\n\r\nexport default AppRouter;","import React, {useContext} from 'react';\nimport './App.css';\nimport {BrowserRouter} from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport AppRouter from \"./components/AppRouter\";\nimport {Context} from \"./index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport Loader from \"./components/Loader\";\n\nfunction App() {\n    const {auth} = useContext<any>(Context)\n    const [user, loading, error] = useAuthState(auth)\n\n    if (loading) {\n        return <Loader />\n    }\n\n    return (\n        <BrowserRouter>\n            <Navbar />\n            <AppRouter />\n        </BrowserRouter>\n    );\n}\n\nexport default App;\n","import React, {createContext} from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport firebase from \"firebase/compat\";\n\n// Initialize Firebase\nfirebase.initializeApp({\n    apiKey: \"AIzaSyDOCn_WfoRDGdKzorNRKsURZs53oUnD170\",\n    authDomain: \"kysapka-web-chat-react.firebaseapp.com\",\n    projectId: \"kysapka-web-chat-react\",\n    storageBucket: \"kysapka-web-chat-react.appspot.com\",\n    messagingSenderId: \"432851087871\",\n    appId: \"1:432851087871:web:f04b1d57b92b727765b7ca\",\n    measurementId: \"G-93KZCW63MZ\"\n});\n\nexport const Context = createContext({})\n\nexport type authType = typeof auth | {}\n\nconst auth = firebase.auth()\nconst firestore = firebase.firestore\n\nReactDOM.render(\n  <Context.Provider value={{\n      firebase,\n      auth,\n      firestore\n  }}>\n      <App />\n  </Context.Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}