{"version":3,"sources":["components/utils/consts.ts","components/Navbar.tsx","components/Login.tsx","components/Loader.tsx","components/routes.ts","components/Chat.tsx","components/AppRouter.tsx","App.tsx","index.tsx"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Navbar","auth","useContext","Context","useAuthState","user","AppBar","style","marginBottom","color","position","Toolbar","variant","Grid","container","justifyContent","Button","onClick","signOut","to","Login","login","a","provider","firebase","GoogleAuthProvider","signInWithPopup","console","log","Container","height","window","innerHeight","alignItems","borderRadius","width","paddingTop","background","direction","Typography","Box","p","Loader","className","publicRoutes","path","Component","privateRoutes","firestore","useState","value","setValue","useCollectionData","collection","orderBy","messages","loading","sendMessage","add","uid","displayName","photoURL","text","createdAt","FieldValue","serverTimestamp","align","justify","marginTop","border","overflowY","map","message","margin","marginLeft","padding","Avatar","src","TextField","fullWidth","rowsMax","onChange","e","target","AppRouter","component","exact","App","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","ReactDOM","render","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.b12f0bd9.chunk.js","sourcesContent":["export const LOGIN_ROUTE = '/login'\r\nexport const CHAT_ROUTE = '/chat'","import React, {useContext} from 'react';\r\nimport {AppBar, Button, Grid, Toolbar} from \"@material-ui/core\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport {LOGIN_ROUTE} from \"./utils/consts\";\r\nimport {Context} from \"../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\n\r\nconst Navbar = () => {\r\n    const {auth} = useContext<any>(Context)\r\n    const [user] = useAuthState(auth)\r\n\r\n    return (\r\n        <AppBar style={{marginBottom: 10}} color={\"secondary\"} position=\"static\">\r\n            <Toolbar variant={\"dense\"}>\r\n                <Grid container justifyContent={\"flex-end\"}>\r\n                    { user ?\r\n                        <Button onClick={() => auth.signOut()} variant={\"outlined\"}>Выйти</Button>\r\n                        :\r\n                        <NavLink to={LOGIN_ROUTE}>\r\n                            <Button variant={\"outlined\"}>Логин</Button>\r\n                        </NavLink>\r\n                    }\r\n                </Grid>\r\n            </Toolbar>\r\n        </AppBar>\r\n    );\r\n};\r\n\r\nexport default Navbar;","import React, {useContext} from 'react';\r\nimport {Box, Button, Container, Grid, Typography} from \"@material-ui/core\";\r\nimport {Context} from \"../index\";\r\nimport firebase from \"firebase/compat\";\r\n\r\n\r\nconst Login = () => {\r\n\r\n    const {auth} = useContext<any>(Context)\r\n\r\n    const login = async () => {\r\n        const provider = new firebase.auth.GoogleAuthProvider()\r\n        const {user} =  await auth.signInWithPopup(provider)\r\n        console.log(user)\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Grid container\r\n                  style={{height: window.innerHeight - 50}}\r\n                  alignItems={\"center\"}\r\n                  justifyContent={\"center\"}\r\n            >\r\n                <Grid style={{borderRadius: 15, width: 400, paddingTop: 20,background: \"rgba(225,237,255,0.93)\"}}\r\n                      container\r\n                      alignItems={\"center\"}\r\n                      direction={\"column\"}\r\n                >\r\n                    <Typography variant=\"h5\">\r\n                        Приветствую тебя, самурай!\r\n                    </Typography>\r\n                    <Box p={5}>\r\n                        <Button onClick={login} variant={\"outlined\"}>\r\n                            Войти с помощью Google\r\n                        </Button>\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Login;","import React from 'react';\r\nimport {Box, Container, Grid, Typography} from \"@material-ui/core\";\r\nimport '../App.css'\r\n\r\nconst Loader = () => {\r\n    return (\r\n        <Container>\r\n            <Grid container\r\n                  style={{height: window.innerHeight - 50}}\r\n                  alignItems={\"center\"}\r\n                  justifyContent={\"center\"}\r\n            >\r\n                <Grid\r\n                    container\r\n                    alignItems={\"center\"}\r\n                    direction={\"column\"}\r\n                >\r\n                    <Box>\r\n                        <div className=\"lds-hourglass\"></div>\r\n                        <Typography variant={'h5'}>loading...</Typography>\r\n                    </Box>\r\n\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n    )\r\n};\r\n\r\nexport default Loader;","import {CHAT_ROUTE, LOGIN_ROUTE} from \"./utils/consts\";\r\nimport Login from \"./Login\";\r\nimport Chat from \"./Chat\";\r\n\r\nexport const publicRoutes = [\r\n    {\r\n        path: LOGIN_ROUTE,\r\n        Component: Login\r\n    }\r\n]\r\n\r\nexport const privateRoutes = [\r\n    {\r\n        path: CHAT_ROUTE,\r\n        Component: Chat\r\n    }\r\n]","import React, {useContext, useState} from 'react';\r\nimport {Context} from \"../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\nimport {Avatar, Button, Container, Grid, TextField, Typography} from '@material-ui/core';\r\nimport {useCollectionData} from \"react-firebase-hooks/firestore\";\r\nimport Loader from \"./Loader\";\r\nimport firebase from \"firebase/compat\";\r\n\r\nconst Chat = () => {\r\n    const {auth, firestore} = useContext<any>(Context)\r\n    const [user] = useAuthState(auth)\r\n    const [value, setValue] = useState('')\r\n    const [messages, loading] = useCollectionData<any>(\r\n        firestore().collection('messages').orderBy('createdAt')\r\n    )\r\n\r\n    const sendMessage = async () => {\r\n        firestore().collection('messages').add({\r\n            uid: user.uid,\r\n            displayName: user.displayName,\r\n            photoURL: user.photoURL,\r\n            text: value,\r\n            createdAt: firebase.firestore.FieldValue.serverTimestamp()\r\n        })\r\n        setValue('')\r\n    }\r\n\r\n    if (loading) {\r\n        return <Loader />\r\n    }\r\n\r\n    return (\r\n        <Container>\r\n            <Typography variant=\"h5\" align={'center'}>\r\n                Чат самураев:\r\n            </Typography>\r\n            <Grid container\r\n                  justify={\"center\"}\r\n                  style={{height: window.innerHeight - 150, marginTop: 20}}>\r\n\r\n                <div style={{width: '80%', height: '70vh', border: '1px solid grey', borderRadius: '10px', overflowY: 'auto'}}>\r\n                    {messages && messages.map(message =>\r\n                        <div style={{\r\n                            margin: 10,\r\n                            border: user.uid === message.uid ? '2px solid green' : '2px solid red',\r\n                            marginLeft: user.uid === message.uid ? 'auto' : '10px',\r\n                            width: 'fit-content',\r\n                            padding: 5,\r\n                            borderRadius: 10\r\n                        }}>\r\n                            <Grid container alignItems={\"center\"} style={{marginBottom: 5}}>\r\n                                <Avatar src={message.photoURL}/>\r\n                                <div style={{marginLeft: 5, borderRadius: 10}}>{message.displayName}</div>\r\n                            </Grid>\r\n                            <div>{message.text}</div>\r\n                        </div>\r\n                    )}\r\n\r\n\r\n                </div>\r\n                <Grid\r\n                    container\r\n                    direction={\"column\"}\r\n                    alignItems={\"flex-end\"}\r\n                    style={{width: '80%'}}\r\n                >\r\n                    <TextField\r\n                        fullWidth\r\n                        rowsMax={2}\r\n                        variant={'outlined'}\r\n                        value={value}\r\n                        onChange={e => setValue(e.target.value)}\r\n                        style={{borderRadius: '20px', marginBottom: 5}}\r\n                    />\r\n                    <Button onClick={sendMessage} color={'secondary'} variant={\"outlined\"}>Отправить</Button>\r\n                </Grid>\r\n            </Grid>\r\n        </Container>\r\n\r\n    );\r\n};\r\n\r\nexport default Chat;","import React, {useContext} from 'react';\r\nimport {Redirect, Route, Switch} from \"react-router-dom\";\r\nimport {privateRoutes, publicRoutes} from \"./routes\";\r\nimport {CHAT_ROUTE, LOGIN_ROUTE} from \"./utils/consts\";\r\nimport {Context} from \"../index\";\r\nimport {useAuthState} from \"react-firebase-hooks/auth\";\r\n\r\nconst AppRouter = () => {\r\n    const {auth} = useContext<any>(Context)\r\n    const [user] = useAuthState(auth)\r\n    return user ?\r\n        (\r\n            <Switch>\r\n                {privateRoutes.map(({path, Component}) =>\r\n                <Route key={path} path={path} component={Component} exact={true}/>\r\n                )}\r\n                <Redirect to={CHAT_ROUTE} />\r\n            </Switch>\r\n        )\r\n        :\r\n        (\r\n            <Switch>\r\n                {publicRoutes.map(({path, Component}) =>\r\n                    <Route key={path} path={path} component={Component} exact={true}/>\r\n                )}\r\n                <Redirect to={LOGIN_ROUTE} />\r\n            </Switch>\r\n        )\r\n};\r\n\r\nexport default AppRouter;","import React, {useContext} from 'react';\nimport './App.css';\nimport {BrowserRouter} from \"react-router-dom\";\nimport Navbar from \"./components/Navbar\";\nimport AppRouter from \"./components/AppRouter\";\nimport {Context} from \"./index\";\nimport {useAuthState} from \"react-firebase-hooks/auth\";\nimport Loader from \"./components/Loader\";\n\nfunction App() {\n    const {auth} = useContext<any>(Context)\n    const [user, loading, error] = useAuthState(auth)\n\n    if (loading) {\n        return <Loader />\n    }\n\n    return (\n        <BrowserRouter>\n            <Navbar />\n            <AppRouter />\n        </BrowserRouter>\n    );\n}\n\nexport default App;\n","import React, {createContext} from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport 'firebase/firestore';\nimport 'firebase/auth';\nimport firebase from \"firebase/compat\";\n\n// Initialize Firebase\nfirebase.initializeApp({\n    apiKey: \"AIzaSyDOCn_WfoRDGdKzorNRKsURZs53oUnD170\",\n    authDomain: \"kysapka-web-chat-react.firebaseapp.com\",\n    projectId: \"kysapka-web-chat-react\",\n    storageBucket: \"kysapka-web-chat-react.appspot.com\",\n    messagingSenderId: \"432851087871\",\n    appId: \"1:432851087871:web:f04b1d57b92b727765b7ca\",\n    measurementId: \"G-93KZCW63MZ\"\n});\n\nexport const Context = createContext({})\n\nexport type authType = typeof auth | {}\n\nconst auth = firebase.auth()\nconst firestore = firebase.firestore\n\nReactDOM.render(\n  <Context.Provider value={{\n      firebase,\n      auth,\n      firestore\n  }}>\n      <App />\n  </Context.Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}